'use strict';class aa{constructor(a,b,c){this.a=a;this.i=b;this.m=c}bind(a){a.bindTexture(a.TEXTURE_2D,this.a)}};function m(a){for(let b=0;3>b;++b)for(let c=0;3>c;++c)a.j[3*b+c]=b==c?1:0}function v(a,b,c){m(a);a.j[0]=2/(b-0);a.j[2]=-(b+0)/(b-0);a.j[4]=2/(0-c);a.j[5]=-(0+c)/(0-c);a.j[8]=1}function w(a){let b=new x;for(let c=0;3>c;++c)for(let d=0;3>d;++d)b.j[3*d+c]=a.j[3*c+d];return b}
class x{constructor(){this.j=new Float32Array(9);m(this)}multiply(a){let b=new x;for(var c=0;3>c;++c)for(var d=0;3>d;++d)b.j[3*c+d]=0;for(c=0;3>c;++c)for(d=0;3>d;++d)for(let e=0;3>e;++e)b.j[3*c+d]+=this.j[3*c+e]*a.j[3*e+d];return b}translate(a,b){m(this);this.j[2]=a;this.j[5]=b}scale(a,b){m(this);this.j[0]=a;this.j[4]=b}rotate(a){let b=Math.cos(a);a=Math.sin(a);m(this);this.j[0]=b;this.j[1]=-a;this.j[3]=a;this.j[4]=b}clone(){let a=new x;for(let b=0;9>b;++b)a.j[b]=this.j[b];return a}};function y(a,b,c,d,e){let h=a.b;h.uniform2f(a.H,b,c);h.uniform2f(a.I,d,e)}function B(a){var b=a.b;b.useProgram(a.a);b.uniform1i(a.J,0);y(a,0,0,1,1);b=a.b;b.uniform2f(a.c,0,0);b.uniform2f(a.g,1,1);b=new x;a.b.uniformMatrix3fv(a.l,!1,w(b).j)}
class C{constructor(a,b,c){this.b=a;this.a=null;{let d=this.b;b=this.createShader(b,d.VERTEX_SHADER);c=this.createShader(c,d.FRAGMENT_SHADER);this.a=d.createProgram();d.attachShader(this.a,b);d.attachShader(this.a,c);c=this.b;c.bindAttribLocation(this.a,0,"v");c.bindAttribLocation(this.a,1,"uvp");d.linkProgram(this.a);if(!d.getProgramParameter(this.a,d.LINK_STATUS))throw"Shader error: "+d.getProgramInfoLog(this.a);}this.l=a.getUniformLocation(this.a,"transform");this.s=a.getUniformLocation(this.a,
"color");this.J=a.getUniformLocation(this.a,"t0");this.H=a.getUniformLocation(this.a,"pos");this.I=a.getUniformLocation(this.a,"size");this.c=a.getUniformLocation(this.a,"texPos");this.g=a.getUniformLocation(this.a,"texSize")}createShader(a,b){let c=this.b;b=c.createShader(b);c.shaderSource(b,a);c.compileShader(b);if(!c.getShaderParameter(b,c.COMPILE_STATUS))throw"Shader error:\n"+c.getShaderInfoLog(b);return b}f(a,b,c,d){this.b.uniform4f(this.s,a,b,c,d)}};class E{constructor(a,b){this.x=null==a?0:a;this.y=null==b?0:b}clone(){return new E(this.x,this.y)}};function F(a){if(null!=a.b){a.D||(a.H=a.K.multiply(a.P.multiply(a.A)),a.D=!0);var b=a.b;b.b.uniformMatrix3fv(b.l,!1,w(a.H).j)}}
class ba{constructor(){this.K=new x;this.P=new x;this.A=new x;this.H=new x;this.g=new x;this.viewport=new E;this.D=!1;this.b=null;this.l=[]}translate(a,b){this.g.translate(a,b);this.A=this.A.multiply(this.g);this.D=!1}scale(a,b){this.g.scale(a,b);this.A=this.A.multiply(this.g);this.D=!1}rotate(a){this.g.rotate(a);this.A=this.A.multiply(this.g);this.D=!1}push(){this.l.push(this.A.clone());if(64<=this.l.length)throw"Stack overflow!";}pop(){this.A=this.l.pop().clone();this.D=!1;F(this)}};class G{constructor(a,b,c,d){this.g=d.length;this.c=a.createBuffer();this.b=a.createBuffer();this.a=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.c);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.a);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.b);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW)}bind(a){a.bindBuffer(a.ARRAY_BUFFER,this.c);a.vertexAttribPointer(0,2,a.FLOAT,
a.R,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.b);a.vertexAttribPointer(1,2,a.FLOAT,a.R,0,0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.a)}u(a){a.drawElements(a.TRIANGLES,this.g,a.UNSIGNED_SHORT,0)}};function I(a,b,c,d,e){b=null!=b?Math.min(b,32):32;let h=2*Math.PI/32,g,f=[],l=[],k=0,p=!1,n=1;for(let t=0;t<b;++t)c&&++k>=c&&(n=(p=!p)?1+d:1,k-=c),g=h*t,e?(f.push(e*Math.cos(g),e*Math.sin(g),Math.cos(g)*n,Math.sin(g)*n,Math.cos(g+h)*n,Math.sin(g+h)*n),f.push(e*Math.cos(g),e*Math.sin(g),e*Math.cos(g+h),e*Math.sin(g+h),Math.cos(g+h)*n,Math.sin(g+h)*n)):f.push(0,0,Math.cos(g)*n,Math.sin(g)*n,Math.cos(g+h)*n,Math.sin(g+h)*n);b=96;e&&(b*=2);for(e=0;e<b;++e)l.push(e);return new G(a.a,f,f,l)}
function ca(a,b){var c;null==c&&(c=2*Math.PI);let d=c/24;c=[];let e=[],h,g;for(let f=0;24>f;++f)h=b(d*f),g=b(d*(f+1)),c.push(h[0],h[1],g[0],g[1],0,0);for(b=0;72>b;++b)e.push(b);return new G(a.a,c,c,e)}function da(a){var b=10;var c=2*Math.PI/b;let d=[],e=[],h,g;for(let f=0;f<b;++f)h=0==f%2?1:2,g=0==f%2?2:1,d.push(Math.cos(c*f)*h,Math.sin(c*f)*h,Math.cos(c*(f+1))*g,Math.sin(c*(f+1))*g,0,0);b*=3;for(c=0;c<b;++c)e.push(c);return new G(a.a,d,d,e)}class ea{constructor(a){this.a=a}};function fa(a){let b=new ea(a.a);a.s=[new G(b.a,[0,0,1,0,1,1,0,1],[0,0,1,0,1,1,0,1],[0,1,2,2,3,0]),new G(b.a,[0,0,1,1,0,1],[0,0,1,1,0,1],[0,1,2]),new G(b.a,[0,-1,.71,.71,-.71,.71],[0,0,1,1,0,1],[0,1,2]),I(b),I(b,null,2,.25,.33),ca(b,c=>[Math.cos(1.25*(c-Math.PI)/4)*Math.sin(c-Math.PI),Math.cos(c-Math.PI)]),da(b)]}function J(a){var b=window.innerWidth,c=window.innerHeight;a.c.width=b;a.c.height=c;a.a.viewport(0,0,b,c);a.i=a.c.width;a.m=a.c.height;a.top=-1;a.left=-a.i/a.m}
function K(a,b,c,d,e,h,g){let f=a.a;null!=d&&y(a.b,d,e,h,g);a.J!=b&&(b.bind(f),a.J=b);null!=c&&c.bind(f);b.u(f)}function L(a,b,c,d,e,h){0>e&&(c-=e);0>h&&(d-=h);K(a,a.s[Math.max(0,Math.min(b|0,a.s.length-1))],null,c,d,e,h)}
function M(a,b,c,d,e,h,g,f,l,k){let p=a.I.i/16,n=d;let t=h/64,z=g/64;d=c-=b.length/2*(p+e)*t;let u=0;for(let D=0;D<b.length;++D){var q=b.charCodeAt(D);if(10==q)d=c,n+=(p+0)*z;else{null!=f&&(u=Math.sin(k+D*f)*l);var A=a,r=a.I,ka=q%16*p;q=(q/16|0)*p;var S=p,T=p;y(A.b,d,n+u,h,g);{var H=A.b;S/=r.i;T/=r.m;let U=H.b;U.uniform2f(H.c,ka/r.i,q/r.m);U.uniform2f(H.g,S,T)}K(A,A.s[0],r);d+=(p+e)*t}}}function N(a,b){a.b=b?a.N:a.O;B(a.b);a.f(1,1,1,1);F(a)}
class ha extends ba{constructor(){super();var a=document.createElement("div");a.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1");this.c=document.createElement("canvas");this.c.width=window.innerWidth;this.c.height=window.innerHeight;this.c.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1");a.appendChild(this.c);document.body.appendChild(a);this.a=null;a=this.a=this.c.getContext("webgl",{alpha:!1});if(null===a)throw"Failed to initialize WebGL.";a.activeTexture(a.TEXTURE0);
a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.enableVertexAttribArray(0);a.enableVertexAttribArray(1);fa(this);this.O=new C(this.a,"\nattribute vec2 v;\nattribute vec2 uvp;\n   \nuniform mat3 transform;\n\nuniform vec2 pos;\nuniform vec2 size;\n\nvarying vec2 uv;\n   \nvoid main() {\n\n    vec3 op = transform * vec3(v * size + pos, 1);\n    gl_Position = vec4(op, 1);\n    uv = uvp;\n}","\nprecision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 color;\n\nuniform vec2 texPos;\nuniform vec2 texSize;\n\nvarying vec2 uv;\n\nvoid main() {\n\n    gl_FragColor = color;\n}\n");
this.b=this.N=new C(this.a,"\nattribute vec2 v;\nattribute vec2 uvp;\n   \nuniform mat3 transform;\n\nuniform vec2 pos;\nuniform vec2 size;\n\nvarying vec2 uv;\n   \nvoid main() {\n\n    vec3 op = transform * vec3(v * size + pos, 1);\n    gl_Position = vec4(op, 1);\n    uv = uvp;\n}","\nprecision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 color;\n\nuniform vec2 texPos;\nuniform vec2 texSize;\n\nvarying vec2 uv;\n\nvoid main() {\n      \n    const float DELTA = 0.001;\n    vec2 tex = uv;    \n    tex.x *= texSize.x;\n    tex.y *= texSize.y;\n    tex += texPos;\n    vec4 res = color * texture2D(t0, tex);\n    if(res.a <= DELTA) {\n        discard;\n    }\n    gl_FragColor = res;\n}\n");
B(this.b);{a=document.createElement("canvas");a.width=1024;a.height=1024;var b=a.getContext("2d");b.font="56px sans-serif";b.textAlign="center";let e;for(let h=33;123>h;++h){var c=h%16;e=h/16|0;b.fillStyle="#000000";for(var d=-3;3>=d;++d)for(let g=-3;3>=g;++g)if(d!=g||0!=d)for(let f=-2;2>=f;++f)b.fillText(String.fromCharCode(h),64*c+32+f+d,64*e+48+g);b.fillStyle="#FFFFFF";for(d=-2;2>=d;++d)b.fillText(String.fromCharCode(h),64*c+32+d,64*e+48)}b=this.a;c=b.createTexture();b.bindTexture(b.TEXTURE_2D,
c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);a.remove();this.I=new aa(c,1024,1024)}this.J=null;J(this)}clear(a,b,c){let d=this.a;d.clearColor(a,b,c,1);d.clear(d.COLOR_BUFFER_BIT)}f(a,b,c,d){null==a&&(a=1);null==b&&(b=1);null==c&&(c=1);null==d&&(d=1);this.b.f(a,b,c,d)}};class ia{constructor(){this.keys={};window.addEventListener("keydown",a=>{a.preventDefault();a=a.keyCode;1!=this.keys[a]&&(this.keys[a]=2)});window.addEventListener("keyup",a=>{a.preventDefault();a=a.keyCode;0!=this.keys[a]&&(this.keys[a]=3)})}update(){for(let a in this.keys)2==this.keys[a]?this.keys[a]=1:3==this.keys[a]&&(this.keys[a]=0)}getKey(a){return this.keys[a]|0}};function O(a,b){a.b+=b-a.l;let c=Math.floor(a.b/a.target)|0,d=0<c;5<c&&(a.b=5*a.target,c=5);for(;0<c--;)null!=a.a&&null!=a.a.update&&a.a.update(a.g),a.g.input.update(),a.b-=a.target;d&&null!=a.a&&null!=a.a.u&&a.a.u(a.c);a.l=b;window.requestAnimationFrame(e=>O(a,e))}class ja{constructor(){this.s=[];this.a=null;this.l=this.b=0;this.frameRate=30;this.target=0;this.g={S:this,input:new ia};this.c=new ha(128,96);window.addEventListener("resize",()=>J(this.c))}};const la=[{i:7,m:7,data:[8,1,2,0,1,3,1,0,1,3,2,1,1,3,1,0,2,1,1,0,3,1,4,0,2,1,1,0,1,3,1,0,1,1,1,0,2,1,1,2,1,1,2,0,1,3,8,1]}];function P(a,b,c){return 0>b||0>c||b>=a.i||c>=a.m?1:a.data[c*a.i+b]}function Q(a,b,c,d,e){c=64*(c+.5);d=64*(d+.5);b.f(.75,0,1);L(b,0,c-29*e,d-29*e,58*e,58*e);let h;for(let g=0;4>g;++g)h=1-(.25*g+.25*a.b)%1,b.f(.75*h,0,h),L(b,0,c-58*h/2*e,d-58*h/2*e,58*h*e,58*h*e)}
class ma{constructor(a,b){a=la[a-1];this.data=Array(a.i*a.m);let c=0;for(let h=0;h<a.data.length-1;h+=2){var d=a.data[h];var e=a.data[h+1];for(let g=0;g<d;++g)this.data[c++]=e}this.i=a.i;this.m=a.m;this.w=Array(a.i*a.m);this.w.fill(0);this.b=0;this.a=30;for(a=0;a<this.m;++a)for(e=0;e<this.i;++e)switch(d=P(this,e,a),d){case 1:this.w[a*this.i+e]=1;break;case 2:null==b.C&&(b.C=new na(e,a));break;case 3:d=b,d.c.push(new oa(e,a)),++d.G}}update(a,b){a&&(0<this.a&&(this.a-=1*b.step,this.a=Math.max(0,this.a)),
this.b=(this.b+.025*b.step)%1)}};function R(a,b){a.v&&(null==a.o&&(a.B-=b.step),0>=a.B&&(a.B=0,a.v=!1,a.h=a.target.clone()),b=a.B/30,a.a.x=64*(a.h.x*b+(1-b)*a.target.x),a.a.y=64*(a.h.y*b+(1-b)*a.target.y))}class V{constructor(a,b){this.h=new E(a|0,b|0);this.a=new E(64*a,64*b);this.B=this.depth=0;this.target=this.h.clone();this.v=!1;this.o=null}};class oa extends V{constructor(a,b){super(a,b);this.b=0}update(a,b){null!=this.o&&(!this.o.v||this.v||this.h.x==this.o.h.x&&this.h.y==this.o.h.y||2==a.w[this.o.h.y*a.i+this.o.h.x]||(this.target=this.o.h.clone(),this.v=!0,a.w[this.h.y*a.i+this.h.x]=0,a.w[this.target.y*a.i+this.target.x]=2),this.v&&(this.B=this.o.B,this.b=(1-this.B/30)*(this.h.x%2==this.h.y%2==0?1:-1)));R(this,b);this.depth=this.a.y+32+16}u(a){const b=[6,3,0],c=[0,0,-2,-6],d=[0,0,-2,-6];var e=[[0,0,0],[.5,.45,.4],[.85,.8,.75],[1,1,
1]];const h=[[0,0,0],[.8,.25,.15],[1,.5,.4],[1,.8,.8]];var g=this.a.x+32;let f=this.a.y+32+-8;e=this.o?e:h;a.f(0,0,0,.25);L(a,3,g,f+24,24,8);a.push();a.translate(g,f);a.rotate(Math.sin(this.b*Math.PI)*Math.PI/6);F(a);for(g=0;3>g;++g)a.f(...e[g]),L(a,5,c[g],d[g],22+b[g],22+b[g]);a.f(...e[3]);L(a,3,c[3],d[3],10,10);a.pop()}};class na extends V{constructor(a,b){super(a,b);this.c=this.G=this.b=this.g=0}update(a,b){{let c=this.h.x|0,d=this.h.y|0;this.v||(1==b.input.getKey(37)?--c:1==b.input.getKey(39)?++c:1==b.input.getKey(38)?--d:1==b.input.getKey(40)&&++d,0<a.w[d*a.i+c]||c==(this.h.x|0)&&d==(this.h.y|0)||(this.v=!0,this.B=30,this.target.x=c,this.target.y=d))}R(this,b);a=2*Math.PI/30;this.v?(this.b+=a*b.step,this.c+=a*b.step,this.b%=2*Math.PI,this.c%=2*Math.PI,this.g=0):(this.c=this.b=0,this.g+=.05*b.step,this.b%=2*Math.PI);
this.depth=this.a.y+32+18}u(a){var b=Math.PI/16;const c=[.67,.4,.1],d=[[1,.7,0],[.8,.4,0]];let e=this.a.x+32,h=this.a.y+32;a.f(0,0,0,.25);L(a,3,e,h+-2+10+12,24,7);let g=h+-12+10,f=4*Math.sin(this.c);for(let l=-1;1>=l;l+=2)a.f(0,0,0),L(a,2,e+10*l-1+1,g+f*l,20,-12),a.f(...c),L(a,2,e+10*l,g+f*l,16,-10);a.push();a.translate(e,h+-12+2*Math.sin(this.g));a.rotate(Math.sin(this.b)*b);F(a);a.f(0,0,0);L(a,0,-27,-23,54,46);a.f(...[.9,.9,.9]);L(a,0,-24,-20,48,40);for(b=-1;1>=b;b+=2)a.f(0,0,0),L(a,3,12*b,-6,10,
10),a.f(),L(a,3,12*b+2,-8,3,3);for(b=0;2>b;++b)a.f(...d[b]),L(a,1,-16*(1-b),0,-16+32*b,16);a.pop()}};class pa{constructor(){this.h=new E;this.speed=new E;this.b=this.a=0;this.g=1;this.c=[1,1,1];this.scale=32;this.depth=0;this.F=!1}update(a){this.F&&(this.speed.y+=.2*a.step,this.speed.y=Math.min(4,this.speed.y),this.a+=this.speed.x/8*.25*a.step,0>=(this.b-=this.g*a.step)&&(this.F=!1),this.h.x+=this.speed.x*a.step,this.h.y+=this.speed.y*a.step)}u(a){this.F&&(a.push(),a.translate(this.h.x,this.h.y),a.rotate(this.a),F(a),a.f(...this.c,this.b/60),L(a,6,0,0,this.scale,this.scale),a.pop())}};function qa(a){a.b=[];a.b.push(a.C);for(var b=0;b<a.c.length;++b)a.b.push(a.c[b]);for(b=0;b<a.a.length;++b)a.a[b].F&&a.b.push(a.a[b]);a.b.sort((c,d)=>c.depth-d.depth)}function W(a){return a.G==a.C.G}
class ra{constructor(){this.C=null;this.c=[];this.g=[];this.a=Array(16);for(let a=0;a<this.a.length;++a)this.a[a]=new pa;this.b=[];this.G=0}update(a,b,c){if(null!=this.C){this.C.update(a,c);var d=this.C;if(d.v)var e=!1;else e=d.h.x|0,d=d.h.y|0,e=0<a.w[d*a.i+(e-1)]&&0<a.w[d*a.i+(e+1)]&&0<a.w[(d-1)*a.i+e]&&0<a.w[(d+1)*a.i+e];if(e){sa(b,!0);return}}for(d=0;d<this.c.length;++d){this.c[d].update(a,c);b=this.c[d];var h=this.C;var g=this.g;e=a;if(null==b.o&&h.h.x==b.h.x&&h.h.y==b.h.y){0!=g.length&&(g[g.length-
1].o=b);b.o=h;g.push(b);++h.G;g=Math.random()*Math.PI*2;h=2*Math.PI/5;for(let u=0;5>u;++u){var f,l=b.a.x+32,k=b.a.y+32,p=4*Math.cos(g),n=4*Math.sin(g)-4,t=b.depth,z=[1,.25,.2];for(let q=0;q<this.a.length;++q)if(!(f=this.a[q]).F){f.h=new E(l,k);f.speed=new E(p,n);f.a=Math.random()*Math.PI*2;f.b=60;f.g=1;f.c=null==z?[1,1,1]:z;f.scale=10;f.depth=t;f.F=!0;break}g+=h}e.w[b.h.y*e.i+b.h.x]=2}}for(a=0;a<this.a.length;++a)this.a[a].update(c)}u(a){qa(this);for(let b=0;b<this.b.length;++b)this.b[b].u(a)}};function ta(a,b,c,d,e,h,g,f){a.b=b;a.speed=c;a.c.r=d;a.c.M=e;a.c.L=h;a.a=60;null!=g&&(a.s=g);a.l=f?f:0;a.g=a.l;a.active=!0}function X(a){let b=a.a/60;a.b&&(b=1-b);return b}
class ua{constructor(){this.a=0;this.s=()=>{};this.c={r:0,M:0,L:0};this.active=!1;this.speed=1;this.b=!1;this.g=0;this.l=1}update(a){this.active&&!(0<(this.g-=1*a.step))&&0>=(this.a-=this.speed*a.step)&&(0==(this.b=!this.b)?(this.s(a),this.a+=60):(this.active=!1,this.a=0))}u(a){!this.active||0<this.g||(a.f(this.c.r,this.c.M,this.c.L,X(this)),L(a,0,0,0,a.viewport.x,a.viewport.y))}};const Y=[.33,.67,1];function sa(a,b){ta(a.a,!0,b?1:2,...Y,()=>{va(a)},b?30:null);a.s=b}function va(a){a.c=new ra;a.g=new ma(1,a.c)}function Z(a,b,c,d,e){a.push();a.translate(b+16,c+8);a.rotate(e);F(a);a.f(0,0,0,.25);L(a,4,0,0,d,d);a.pop();a.push();a.translate(b,c);a.rotate(e);F(a);a.f(...[.5,.5,.5]);L(a,4,0,0,d,d);a.f(...[.75,.75,.75]);L(a,4,0,0,d-8,d-8);a.pop()}
class wa{constructor(){va(this);this.l=this.b=0;this.a=new ua;ta(this.a,!1,1,...Y);this.s=!1}update(a){var b=Math.PI/2/30;this.l+=.05*a.step;if(this.c.C.v||this.a.active){b=this.b+b*(this.a.active?-1:1)*a.step;var c=Math.PI/2;this.b=0>b?c- -b%c:b%c}else this.b=0;this.a.active?this.a.update(a):(this.g.update(W(this.c),a),this.c.update(this.g,this,a),2==a.input.getKey(82)&&sa(this))}u(a){a.clear(...Y);N(a,!1);var b=1;this.a.active&&(b=X(this.a),b=1+.25*b*(this.a.b?1:-1));var c=this.g,d=64*c.m,e=a.i/
a.m*d;v(a.K,e,d);a.viewport.x=e;a.viewport.y=d;a.D=!1;d=64*c.i/2;c=64*c.m/2;a.translate(a.viewport.x/2-d,0);a.translate(d,c);a.scale(b,b);a.translate(-d,-c);F(a);c=this.g;b=W(this.c);for(d=0;d<c.m;++d)for(e=0;e<c.i;++e){var h=P(c,e,d);switch(h){case 1:{var g=c,f=a,l=e;var k=d;var p=[[.9,.95,1],[.6,.8,1],[.05,.25,.6],[.15,.45,.8],[.33,.67,1]],n=[1!=P(g,l-1,k),1!=P(g,l,k-1),1!=P(g,l+1,k),1!=P(g,l,k+1)];f.f(...p[4]);L(f,0,64*l,64*k,64,64);n[2]&&(f.f(...p[2]),L(f,0,64*l+51.2,64*k,12.8,64));n[3]&&(f.f(...p[3]),
L(f,0,64*l,64*k+51.2,64,12.8),n[2]&&(f.f(...p[2]),L(f,1,64*l+51.2,64*k+51.2,-12.8,-12.8)));n[0]&&(f.f(...p[0]),L(f,0,64*l,64*k,12.8,64),n[3]&&(f.f(...p[3]),L(f,1,64*l,64*k+51.2,-12.8,12.8)));n[1]&&(f.f(...p[1]),L(f,0,64*l,64*k,64,12.8),n[0]&&(f.f(...p[0]),L(f,1,64*l,64*k,12.8,12.8)),n[2]&&(f.f(...p[2]),L(f,1,64*l+51.2,64*k,-12.8,12.8)));var t=[0,1,1,0],z=[0,0,1,1],u=[-1,-1,1,1];const A=[-1,1,1,-1];for(let r=0;4>r;++r){var q=t[r];h=z[r];n[r]||n[(r+1)%4]||1==P(g,l-1+2*q,k-1+2*h)||(f.f(...p[r]),L(f,
1,64*l+51.2*q,64*k+51.2*h,12.8*u[r],12.8*A[r]),f.f(...p[(r+1)%4]),L(f,1,64*l+51.2*q,64*k+51.2*h,-12.8*u[r],-12.8*A[r]))}}break;default:g=c;f=a;l=e;k=d;q=[1!=P(g,l-1,k),1!=P(g,l,k-1),1!=P(g,l+1,k),1!=P(g,l,k+1)];l%2==k%2?f.f(.9,.75,.5):f.f(.8,.55,.3);L(f,0,64*l,64*k,64,64);f.f(0,0,0,.25);p=1==P(g,l-1,k-1);t=n=0;q[0]?q[1]?p&&L(f,0,64*l,64*k,16,16):(q[0]&&!p&&(n=3),L(f,q[0]&&!p?1:0,64*l-n,3+64*k,-16,-13),L(f,0,64*(l+.25)-n,3+64*k,48+n,13)):(q[1]&&!p&&(t=1,n=3),L(f,0,3+64*l,64*(k+.25)-n,13,48+n),L(f,
t,3+64*l,64*k-n,13,16),q[1]||L(f,0,64*(l+.25),64*k,48,16));f.f(0,0,0);q[0]||L(f,0,64*l,64*k,3,64);q[1]||L(f,0,64*l,64*k,64,3);q[2]||L(f,0,64*(l+1)-3,64*k,3,64);q[3]||L(f,0,64*l,64*(k+1)-3,64,3);t=[0,1,1,0];z=[0,0,1,1];for(u=0;4>u;++u)n=t[u],p=z[u],q[u]&&q[(u+1)%4]&&1==P(g,l-1+2*n,k-1+2*p)&&L(f,0,64*l+61*n,64*k+61*p,3,3);if(2==h)if(k=c.a/30,b&&0>=k)Q(c,a,e,d,1);else if(!b||0<k)g=a,f=e,l=d,g.push(),g.translate(64*(f+.5),64*(l+.5)),g.rotate(Math.PI/4),F(g),g.f(.67,0,0),L(g,0,-25.6,-8,51.2,16),L(g,0,
-8,-25.6,16,51.2),g.pop(),Q(c,a,e,d,1-k)}}this.c.u(a);m(a.A);a.D=!1;c=a.i/a.m*720;v(a.K,c,720);a.viewport.x=c;a.viewport.y=720;a.D=!1;F(a);this.a.u(a);if(this.a.active&&this.s){c=a.viewport.y/2;b=a.viewport.x/2-144;N(a,!0);d=X(this.a);this.a.b&&(e=this.a,d=Math.max(1-(.001>=e.l?0:e.g/e.l),d));for(f=0;5>f;++f)e=(d-.2*(this.a.b?f:4-f))/.2,e=Math.max(0,Math.min(e,1)),g=-64+64*e,a.f(1,.4,0,e),M(a,"STUCK".charAt(f),b+72*f,c-48+g,0,96,96);N(a,!1)}Z(a,0,0,128,this.b);Z(a,a.viewport.x,0,96,-this.b);Z(a,0,
a.viewport.y,96,-this.b);Z(a,a.viewport.x,a.viewport.y,128,this.b);c=["STAGE 1","Password: NONE"];b=[64,48];d=[6,4];e=[Math.PI/3,Math.PI/6];g=[6,4];f=[6,4];N(a,!0);for(k=0;2>k;++k)for(h=1;0<=h;--h)l=0==k?36:a.viewport.y-4-32,l-=b[k]/2-h*f[k],1==h?a.f(0,0,0,.25):a.f(1,1,.5),M(a,c[k],a.viewport.x/2+h*g[k],l,-16,b[k],b[k],e[k],d[k],this.l)}};window.onload=()=>{let a=new ja;var b=new wa(a.c.a);a.s.game=b;a.a=b;a.frameRate=60;a.g.step=60/a.frameRate;a.target=1E3/a.frameRate;O(a,0)};
